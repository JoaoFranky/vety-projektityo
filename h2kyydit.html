  <!doctype html>

  <html lang="fi">
  <head>
    <title>projektityö</title>
    <meta charset="utf-8">
    <meta name="description" content="projektityö">
    <meta name="author1" content="Joao Hämäläinen">
    <meta name="author2" content="Anni Laser">
    <link rel="stylesheet" href="h2kyydit.css">
    <link rel="img" href="Punkaharju.jpg">
    <meta name="keywords" content="HTML,CSS">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <script type="text/javascript">

      class Palvelu {
        constructor() {
          this.kayttajalista = [];
          this.viestilista = [];
        }
      }

      class Kayttaja {  
        constructor(nimi) {
          this.nimi = nimi;
          this.kuvalista = [];
          this.viestilista = [];
          this.kuva = "";
          this.meili = "";
          this.postilista = true;
        }
      }

      class Kuva {
        constructor(url) {
          this.kuva = url;
          this.saateviesti = new Saateviesti();
        }
      }

      class Saateviesti {
        constructor(teksti) {
          this.teksti = teksti
        }
      }

      /*********************************
      Class gridElement on ns. container kuvalle,
      koostuu div:istä, jossa kuva ja alapalkki.
      Alapalkissa tykkäys-, ja jakonappulat.

      *********************************/

      class gridElement {
        constructor(kuva) {
          this.kuva = kuva;
          this.tykkaykset = 0;
          this.jakoNappi = null;
          this.ID = "";
        }
      }

  /*****************************
    Globaaleja muuttujia
  *****************************/

      var kayttaja = null;
      var viestipankki = [];
      var gridElementTykkays = [];

      //Kaikki kuvat
      var kuvapankki = ["1vetykyydit.png",
                        "2vetykyydit.png",
                        "3vetykyydit.png",
                        "4vetykyydit.png",
                        "5vetykyydit.png",
                        "6vetykyydit.png",
                        "7vetykyydit.png",
                        "8vetykyydit.png",
                        "1vetykyyditcopy.png",
                        "2vetykyyditcopy.png",
                        "3vetykyyditcopy.png",
                        "4vetykyyditcopy.png",
                        "5vetykyyditcopy.png",
                        "6vetykyyditcopy.png",
                        "7vetykyyditcopy.png",
                        "8vetykyyditcopy.png",];

      var extraKuvapankki = ["Hydro_Man_1_.jpeg",
                            "youtube-square-brands.svg",
                            "finland-hd.jpg",
                            "Punkaharju.jpg",
                            "woikoski-logo.jpg"];

      var julkaisuKuvat = [];

      var palvelu = new Palvelu();

      var uploadImage = "";


      /**  KOLMANNE OSAPUOLEN KOODIA 
        Lähde: https://ourcodeworld.com/articles/read/278/how-to-split-an-array-into-chunks-of-the-same-size-easily-in-javascript

      * Returns an array with arrays of the given size.
      *
      * @param myArray {Array} array to split
      * @param chunk_size {Integer} Size of every group
      */
      
      function chunkArray(myArray, chunk_size) {
          var index = 0;
          var arrayLength = myArray.length;
          var tempArray = [];
          
          for (index = 0; index < arrayLength; index += chunk_size) {
              myChunk = myArray.slice(index, index+chunk_size);
              // Do something if you want with the group
              tempArray.push(myChunk);
          }

          return tempArray;
      }

      // Split in group of 3 items
      var result = chunkArray([1,2,3,4,5,6,7,8], 3);
      // Outputs : [ [1,2,3] , [4,5,6] ,[7,8] ]
      console.log(result);


  /*****************************
    Onload funktiot
  *****************************/

      //Missä järjestyksessä kuvat laitetaan???
      /****************************
        - Luodaan gridElementit
          - 
        - Annetaan niille kuvat
        - Laitetaan ne html:ään

      "<div class='gridElement'>" +
                "<img class='picture' src=" + kuvapankki[k] + ">" +
                  "<div class='banner'>" +
                    "<button class='heartbtn'>" +
                      "<img src='heart-regular.svg'>" +
                    "</button>" +
                    "<button class='sharebtn'>" +
                      "<img src='share-square-solid.svg'>" +
                    "</button>" +
                  "</div>" +
                "</div>"

      ****************************/

      var gridElementLista = [];
      var tulos = "";

      function lataaGrid() {

      /*****************************
        luodaan gridElementOlit
      *****************************/        
        for (var k = 0; k < kuvapankki.length; k++) {
          var uusiGridElement = new gridElement(kuvapankki[k])
          uusiGridElement.tykkaykset = getRndInteger(10, 120)  //Random amount of likes
          uusiGridElement.ID = k
          gridElementLista.push(uusiGridElement)
        }

        console.log(gridElementLista)

      /*****************************
        Division into 4 COLUMNS-ARRAYS
      *****************************/ 

      //Jaetaan julkaistujen kuvien määrä 4:llä (maksimi pylväsmäärällä), jotta menisi kutakuikin tasan columneissa
        var numberItemsInColumn = Math.floor(gridElementLista.length/4);
        
        var columns = chunkArray(gridElementLista, numberItemsInColumn)

        console.log(columns)

      /*****************************
        Se mitä spämmätään html:llään
      *****************************/

      var tulokset = ["", "", "", ""]

      for (var x = 0; x < columns.length; x++) {
        for (var k = 0; k < columns[x].length; k++) {
          tulokset[x] +=  "<div id='" + columns[x][k].kuva + "' class='gridElement'>" +
                            "<img class='picture' src=" + columns[x][k].kuva + ">" +
                            "<div class='banner'>" +
                              "<a class='bannerElement heartbtn' onclick='tykkaaSydan(" + columns[x][k].ID + ")' type='button'>" + //Heart needs to change, according toID
                                "<img id='" + columns[x][k].ID + "heart'" + " src='heart-regular.svg'>" +
                              "</a>" +
                              "<p class='bannerElement likes'>" + columns[x][k].tykkaykset + "</p>" +
                              "<a class='bannerElement sharebtn' type='button'>" +
                                "<img src='share-square-solid.svg'>" + //Ponnahtaa esille form, jossa somelogot (Annin logo)
                              "</a>" +
                            "</div>" +
                          "</div>"
        }
      } 

      console.log(tulokset)
      console.log(tulokset[0])
      console.log(tulokset[1])
      console.log(tulokset[2])
      console.log(tulokset[3])

        //<input type='image' src='heart-regular.svg' name='saveForm' class='heartbtn' id='heart'/>

        document.getElementById('column1').innerHTML = tulokset[0];
        document.getElementById('column2').innerHTML = tulokset[1];
        document.getElementById('column3').innerHTML = tulokset[2];
        document.getElementById('column4').innerHTML = tulokset[3];

      }

  /*****************************
    Muut funktiot
  *****************************/

    //Random funkito välitlä min - max
      function getRndInteger(min, max) {
        return Math.floor(Math.random() * (max - min)) + min;
      }

      function uusiKayttaja() {
         kayttaja = new Kayttaja(document.getElementById('nimi').value)
         kayttaja.meili = document.getElementById('meili').value
         kayttaja.kuva = document.getElementById('uploadimg').src
         julkaisuKuvat.push(kayttaja.kuva)
         console.log(kayttaja.kuva)
      }

      function lisaaKuvapankkiin() {

      }

      function jaaKuva() {

      }

      function tykkäykset() {

      }

      function vaihdaKuva() {
        //Valitsee satunnaisen kuvan valmiista kuvapankista
        var randomPicture = kuvapankki[getRndInteger(0, kuvapankki.length)];
        document.getElementById('uploadimg').src = randomPicture;
        document.getElementById('uploadimg').style.width = '100%'
      }

      function tykkaaSydan(id) {
        //Tyhjä sydän -> täysi sydän -> tyhjä sydän...
        var image = document.getElementById(this.id);
        if (image.src.match("heart-regular.svg")) {
          image.src = "heart-solid.svg";
        } else {
          image.src = "heart-regular.svg";
        }
      }

  /*************************************
  Projektityön   omalta  verkkosivulta   (ja/tai  itse  Demosta)   pitää   käydä  ilmi  
  seuraavat asiat:
  o Palvelun  idea
  o Ohjeet  käyttäjälle,  ts. miten palvelua  käytetään
  *************************************/

  /*************************************
  Palvelusta  pitää voida tallentaa viestit tms.  Localstorageen  JSON-stringinä, 
  niin, että  uudelleenlatauksen  yhteydessä  viestit eivät häviä näkyvistä.  On  
  vielä parempi,  jos tallennus toimii  pilvessä  (esim.  Myjson.com)
  *************************************/

  /*************************************
  nähdä kaverit,  lisätä  kavereita itselleen,  
  lähettää   viesti,   nähdä   saapuneet   viestit jne.  Lisäksi   voit  keksiä  itse  uusia   ja 
  kokeellisia toimintoja.
  *************************************/

  /*************************************
    Navigation Bar DropDown menu
  *************************************/

    /* When the user clicks on the button, 
    toggle between hiding and showing the dropdown content */
    function dropDownFunction() {
      document.getElementById("myDropdown").classList.toggle("show");
    }

    // Close the dropdown if the user clicks outside of it
    window.onclick = function(event) {
      if (!event.target.matches('.dropbtn')) {
        var dropdowns = document.getElementsByClassName("dropdown-content");
        var i;
        for (i = 0; i < dropdowns.length; i++) {
          var openDropdown = dropdowns[i];
          if (openDropdown.classList.contains('show')) {
            openDropdown.classList.remove('show');
          }
        }
      }
    }

      /* When the user clicks on the button, 
    toggle between hiding and showing the dropdown content */
    function barDropDownFunction() {
      document.getElementById("barmyDropdown").classList.toggle("barshow");
    }

    // Close the dropdown if the user clicks outside of it
    window.onclick = function(event) {
      if (!event.target.matches('.bardropbtn')) {
        var dropdowns = document.getElementsByClassName("bardropdown-content");
        var i;
        for (i = 0; i < dropdowns.length; i++) {
          var openDropdown = dropdowns[i];
          if (openDropdown.classList.contains('barshow')) {
            openDropdown.classList.remove('barshow');
          }
        }
      }
    }


  /*************************************
    Modal Login form (Third Party Code)
    "https://www.w3schools.com/howto/tryit.asp?filename=tryhow_css_login_form_modal"
  *************************************/

  // Get the modal
  var modal = document.getElementById('id01');

  // When the user clicks anywhere outside of the modal, close it
  window.onclick = function(event) {
      if (event.target == modal) {
          modal.style.display = "none";
      }
  }

    </script>
  </head>
  <body onload="lataaGrid()">
    <div class="wrapper">
      <div id="frontpage">
        <header>
          <div>
            <a href="vetykampanja.html">  
              <img id="header-logo" class="header-element" src="header-logo.png" alt="header-logo">
            </a>
          </div>
          <ul id="somepalkki" class="header-element">
            <li class="some-item">
              <a href="https://www.youtube.com/">
                <img id="youtube-logo" class="some-logo" src="youtube-square-brands.svg" alt="youtube-logo">
              </a>
            </li>
            <li class="some-item">
              <a href="https://twitter.com/?lang=en">
                <img id="twitter-logo" class="some-logo" src="twitter-square-brands.svg" alt="twitter-logo">
              </a>
            </li>
            <li class="some-item">
              <a href="https://www.facebook.com/">
                <img id="facebook-logo" class="some-logo" src="facebook-square-brands.svg" alt="facebook-logo">
              </a>
            </li>
            <li class="some-item">
              <a href="https://www.instagram.com/">
                <img id="instagram-logo" class="some-logo" src="instagram-brands.svg" alt="instagram-logo">
              </a>
            </li>
          </ul>
          <div id="bars-holder">
            <a onclick="dropDownFunction()" class="dropbtn">
            <img id="bars-solid" src="bars-solid.svg" class="header-element">
            <div class="dropdown">
                <ul id="myDropdown" class="dropdown-content">
                  <!-- <li><a href="#home">Mikä on vetytalous?</a></li> -->
                  <li><a href="kansalaisaloite.html">Kansalaisaloite</a></li>
                    <li><a href="#Osallistu">Osallistu</a></li>
                    <li><a href="h2kyydit.html">H2-kyydit</a></li>
                  <!-- <li><a href="#about">Uutiset</a></li> -->
                    <li><a href="#Yritysyhteistyö">Kumppanit</a></li>
                  <!-- <li><a href="#contact">Usein kysyttyä</a></li> -->
                    <li><a href="#footer">Yhteistiedot</a></li>
                </ul>
            </div>
            </a>
          </div>
        </header>
        <nav id="navigation-bar" class="header-element">
          <ul class="mainnav">
            <li class="menu-item"><a href="vetykampanja.html#Osallistu"><h4>Osallistu</h4></a></li>
            <li class="menu-item"><a href="vetykampanja.html#Lahjoita"><h4>Lahjoita</h4></a></li>
            <li class="menu-item"><a href="vetykampanja.html#Yritysyhteistyö"><h4>Yritysyhteistyö</h4></a></li>
            <li class="menu-item"><a href="h2kyydit.html"><h4>H<sub>2</sub>-kyydit</h4></a></li>
            <li class="menu-item"><a href="kansalaisaloite.html"><h4>Kansalaisaloite</h4></a></li>
          </ul>
        </nav>

        <div id="logo-holder">
          <div class="hero-wrapper">
            <img id="anni-H2-logo" src="White.vetykyydit.png" alt="H2-logo">
          </div>
        </div>

        <!--________________ANNIN MUUTOKSET_________________-->
        <div class ="logoboksi"></div>
        <div class = "leipis">
          <p class = "selostus">H2-kampanja taistelee puhtaamman energian puolesta; ratkaisunamme vety! Haluaisitko oppia siitä lisää ja olla mukana vaikuttamassa?
                                <br>Kuvaamme videoita vetyautossa, jossa mukana sinun lisäksi haastateltava on ympäristövaikuttavia julkkiksia sekä vetynalan asiantuntijoita.
                                <br>Osallistuminen on helppoa! Ota vetyaiheinen ataa kuvasi #vetykampanja-aihetunnisteella ja jaa se soisaalisen median kanavissasi! Eniten tykkäyksiä saanut palkitaan: pääset mukaan vetyajelulle!</p>

        <!-----------------------------
            Modal Login Form (Third Party Code)
            "https://www.w3schools.com/howto/tryit.asp?filename=tryhow_css_login_form_modal"
          ------------------------------->

        <h2 class ="osallistu">Osallistu kilpailuun lataamalla kuva! Käytä meidän #h2 -häshtägiä<h2>
        </div>
        <button class = "sendphotobtn" onclick="document.getElementById('id01').style.display='block'">Lataa kuva</button>
        <div id="id01" class="modal">   
          <form class="modal-content animate" action="h2kyydit.html">
            <div class="imgcontainer">
              <span onclick="document.getElementById('id01').style.display='none'" class="close" title="Close Modal">&times;</span>
            </div>
            <div class="container">
              <button class="modalbtn" class="uploadbtn" onclick="vaihdaKuva()" type="button">
                <img id="uploadimg" src="upload.icon.png">
              </button>
              <label for="for"><b>Kirjoita kuvateksti!</b></label>
              <input id="nimi" type="text" placeholder="#vetykampanja rokkaa..." name="caption" required>
              <label for="e-mail"><b>sähköposti</b></label>
              <input id="meili" type="email" placeholder="matti@meikäläinen.com" name="e-mail" oninvalid="this.setCustomValidity('Please, enter a valid e-mail')"
                  oninput="this.setCustomValidity('')" required>  
              <button class="modalbtn" onclick="document.getElementById('id01').style.display='none'" type="submit">Lataa kuvasi!</button>
              <label>
              <input type="checkbox" checked="checked" name="remember"> Lisätkää minut postilistaan!
              </label>
            </div>
            <div class="container" style="background-color:#f1f1f1">
              <button type="button" onclick="document.getElementById('id01').style.display='none'" class="cancelbtn">Cancel</button>
              <span class="psw"><a href="#">Lähetä kuva</a></span>
            </div>  
          </form>
        </div>
          <!-- Photo Grid -->
        <div class="row"> 
          <div class="column" id="column1">
          </div>
          <div class="column" id="column2">
          </div>  
          <div class="column" id="column3">
          </div>
          <div class="column" id="column4">
          </div>
        </div>
      </div>
    </div>
  </body>
  </html>
